# Dirty Flag Pattern 

## 意図

結果が必要になるまで作業を先延ばしにすることで、不要な作業を回避する。




## パターン

一組の主データが時間の経過とともに変化する。派生データのセットは、何らかの高価な処理によって、このデータから決定される。ダーティ "フラグは、派生データがプライマリデータと同期していないことを追跡する。このフラグは、主データが変化したときにセットされる。もし派生データが必要なときにフラグがセットされていれば、再処理してフラグをクリアする。そうでない場合は、前回キャッシュされた派生データが使用されます。






## いつ使うか

他の最適化パターンと同様、このパターンもコードの複雑さを増大させる。 このパターンの使用は、十分に大きな性能上の問題がある場合にのみ検討してください。

どちらの場合もダーティタグが適用されます。
- 現在のタスクは、高価な計算オーバーヘッドを持つ
- 現在のタスクは、高価な同期オーバーヘッドを持つ。
  このどちらかを満たす場合、つまり、どちらも元データから対象データへの変換に多くの時間を消費する場合は、オーバーヘッドを節約するためにダーティタギングパターンを使用することを検討する。

元データが対象データよりもはるかに速い速度で変化している場合、その後の修正によってデータが無効化されるため、ダーティタギングモードは適さない。

