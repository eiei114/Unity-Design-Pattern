# Object Pool Pattern 

## Intent

オブジェクトを個別に確保・解放するのではなく、固定プールから再利用することで、パフォーマンスとメモリ使用量を改善する。




## パターン

再利用可能なオブジェクトのコレクションを維持するプールクラスを定義する。各オブジェクトは、現在「生きて」いるかどうかを知るための「使用中」クエリをサポートする。プールが初期化されるとき、オブジェクトのコレクション全体を前もって作成し（通常、単一の連続した割り当てで）、それらをすべて「未使用」状態に初期化する。

新しいオブジェクトが必要な場合は、プールにオブジェクトを要求します。プールは利用可能なオブジェクトを見つけ、「使用中」に初期化し、それを返します。オブジェクトが不要になったら、「未使用」状態に戻される。このようにして、メモリやその他のリソースを確保することなく、オブジェクトを自由に作成したり破棄したりすることができるのです。



## いつ使うか

このパターンは、ゲームのエンティティやビジュアルエフェクトのようなわかりやすいものに広く使われていますが、現在再生中のサウンドのような目に見えないデータ構造にも使われます。Object Poolを使用するのは、以下のような場合です。

- オブジェクトの作成と破棄を頻繁に行う必要がある。
- オブジェクトは同じような大きさである。
- ヒープにオブジェクトを割り当てるのは遅いし、メモリの断片化につながる可能性がある。
- 各オブジェクトは、データベースやネットワーク接続など、取得にコストがかかり、再利用が可能なリソースをカプセル化している。



